<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<title>FindIt Nearby</title>
<style type="text/css">
div.fields {margin-left: 2em; margin-bottom: 1em;}
div.fields label {clear: left;}
div.fields input {;}
div#messages {;}
</style>
<script type="text/javascript" src="http://code.jquery.com/jquery-1.7.1.min.js"></script>
<script type="text/javascript" src="http://maps.googleapis.com/maps/api/js?key=&sensor=true"></script>
<script type="text/javascript" src="findit.js"></script>
<script type="text/javascript">
 
  var findItEvent = function(event) {
    switch (event.type) {
    case "GEOLOCATION_RUNNING":
      $("#messages").html("<i>Stand by while I find your current location ... </i>");
      break;
    case "GEOLOCATION_UNSUPPORTED":
      // $("#address_form").css("display", "block");
      //$("#messages").html("<b>Sorry, your browser does not support automatic geolocation ... enter address manually.</b>");
      $("#messages").html("<b>Sorry, your browser does not support automatic geolocation. Manual address entry not implemented yet.</b>");
      break;
    case "GEOLOCATION_FAILED":
      //$("#address_form").css("display", "block");
      //$("#messages").html("<b>Automatic geolocation failed ... enter address manually.</b>");
      $("#messages").html("<b>Sorry, automatic geolocation failed. Manual address entry not implemented yet.</b>");
      break;
    case "GEOLOCATION_SUCCEEDED":
      $("#messages").html("<i>Geolocation complete. Searcing for nearby features ... </i>");
      break;
    case "FEATURES_SEARCHING":
      // keep GEOLOCATION_SUCCEEDED message
      break;
    case "FEATURES_MAPPING":
      $("#messages").html("<i>Feature search complete. Loading map ...</i>");
      break;
    case "COMPLETE":
      $("#messages").html("");
      break;
    default:
      throw "unknown event type: " + event.type;
    }
  }

</script>
</head>
<body onload="FindIt.start({map_id: 'map_canvas', handler: findItEvent})">
<div id="messages"></div>
<div id="map_canvas" style="width: 320px; height: 480px;"></div>

<form id="address_form" method="post" style="display:none">
  <div class="fields"">
    <label for="address">Address:</label> <input type="text" name="address" size="40" /><br />
  </div>
  <div class="fields">
    <input type="submit" name="Find Nearby" />
  </div>
</form>

<form id="latlng_form" method="post" style="display:none">
  <div class="fields">
    <label for="latitude">Latitude:</label> <input type="text" name="latitude" size="12" /><br />
    <label for="longitude">Longitude:</label> <input type="text" name="longitude" size="12" /><br />
  </div>
  <div class="fields">
    <input type="submit" name="Find Nearby" />
  </div>
</form>

</body>
</html>